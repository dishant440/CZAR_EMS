{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import EmployeeProfile from'./EmployeeProfile.jsx';import AdminPanel from'./AdminPanel.jsx';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const[adminCredentials,setAdminCredentials]=useState(null);useEffect(()=>{const token=localStorage.getItem('token');const userData=localStorage.getItem('user');const adminCreds=localStorage.getItem('adminCredentials');console.log('Dashboard - Token:',token);console.log('Dashboard - User Data:',userData);console.log('Dashboard - Admin Creds:',adminCreds);if(token&&userData){try{setUser(JSON.parse(userData));}catch(error){console.error('Error parsing user data:',error);}}if(adminCreds){try{const creds=JSON.parse(adminCreds);console.log('Parsed admin credentials:',creds);setAdminCredentials(creds);}catch(error){console.error('Error parsing admin credentials:',error);}}setLoading(false);},[]);const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('user');window.location.href='/';};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"});}if(!user){return/*#__PURE__*/_jsx(\"div\",{className:\"dashboard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"not-logged-in\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Please log in to access the dashboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.href='/auth',children:\"Go to Login\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Welcome, \",user.name]}),/*#__PURE__*/_jsx(\"span\",{className:\"role-badge\",children:user.role||'employee'}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-btn\",children:\"Logout\"})]})]}),/*#__PURE__*/_jsx(\"main\",{className:\"dashboard-content\",children:user.role==='admin'?/*#__PURE__*/_jsx(AdminPanel,{}):/*#__PURE__*/_jsx(EmployeeProfile,{})})]});}export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","EmployeeProfile","AdminPanel","jsx","_jsx","jsxs","_jsxs","Dashboard","user","setUser","loading","setLoading","adminCredentials","setAdminCredentials","token","localStorage","getItem","userData","adminCreds","console","log","JSON","parse","error","creds","handleLogout","removeItem","window","location","href","className","children","onClick","name","role"],"sources":["c:/Users/Siddhi/Desktop/EMS/client/src/components/Dashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport EmployeeProfile from './EmployeeProfile.jsx';\nimport AdminPanel from './AdminPanel.jsx';\n\n\nfunction Dashboard() {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [adminCredentials, setAdminCredentials] = useState(null);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const userData = localStorage.getItem('user');\n    const adminCreds = localStorage.getItem('adminCredentials');\n    \n    console.log('Dashboard - Token:', token);\n    console.log('Dashboard - User Data:', userData);\n    console.log('Dashboard - Admin Creds:', adminCreds);\n    \n    if (token && userData) {\n      try {\n        setUser(JSON.parse(userData));\n      } catch (error) {\n        console.error('Error parsing user data:', error);\n      }\n    }\n    \n    if (adminCreds) {\n      try {\n        const creds = JSON.parse(adminCreds);\n        console.log('Parsed admin credentials:', creds);\n        setAdminCredentials(creds);\n      } catch (error) {\n        console.error('Error parsing admin credentials:', error);\n      }\n    }\n    \n    setLoading(false);\n  }, []);\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    window.location.href = '/';\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Loading...</div>;\n  }\n\n  if (!user) {\n    return (\n      <div className=\"dashboard\">\n        <div className=\"not-logged-in\">\n          <h2>Please log in to access the dashboard</h2>\n          <button onClick={() => window.location.href = '/auth'}>\n            Go to Login\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"dashboard\">\n      <header className=\"dashboard-header\">\n        <h1>Dashboard</h1>\n        <div className=\"user-info\">\n          <span>Welcome, {user.name}</span>\n          <span className=\"role-badge\">{user.role || 'employee'}</span>\n          <button onClick={handleLogout} className=\"logout-btn\">\n            Logout\n          </button>\n        </div>\n      </header>\n\n      <main className=\"dashboard-content\">\n\n        \n        {user.role === 'admin' ? (\n          <AdminPanel />\n        ) : (\n          <EmployeeProfile />\n        )}\n      </main>\n    </div>\n  );\n}\n\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}